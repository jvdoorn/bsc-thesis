% !TEX root = ../../thesis.tex
\section{Phase-flux relation}
\label{app:derivation-phase-flux-relation}
The magnetic field $\vec{B}$ can be written as the curl of the magnetic vector potential $\vec{A}$. This allows the magnetic flux through the superconducting loop to be rewritten in terms $\vec{A}$.
\begin{align}
	\Phi = \oiint \vec{B} \cdot d\vec{a} = \oiint \left(\nabla \times \vec{A}\right) \cdot d\vec{a} = \oint \vec{A} \cdot d\vec{l}
\end{align}
The closed integral over $\vec{A}$ can be any path enclosing the hole in the superconductor. It consists of two pieces, namely the junction and the rest of the loop.
\begin{align}
	\Phi = \int_{\text{JJ}} \vec{A} \cdot d\vec{l} + \int_{\text{loop}} \vec{A} \cdot d\vec{l}
	\label{eqn:magnetic-potential-integral}
\end{align}
For the integral over the junction we use the gauge-invariant phase (Equation~\ref{eqn:gauge-invariant-phase}).
\begin{align}
	\gamma = \Delta\varphi_{\text{JJ}} - \frac{2\pi}{\Phi_0}\int_{\text{JJ}}\vec{A} \cdot d\vec{l} \Rightarrow \int_{\text{JJ}}\vec{A} \cdot d\vec{l} = \frac{\Phi_0}{2\pi} \left(\Delta\varphi_{\text{JJ}} - \gamma\right)
\end{align}
For the integral over the rest of the loop we use the superfluid velocity\footnote{See \citetitle{tinkhamIntroductionSuperconductivity} equation 4.9, the equation has been converted to SI units.}:
\begin{equation}
	m^*\vec{v} = 2m_e\vec{v} = \hbar \nabla \varphi - \frac{e^*\vec{A}}{c} \stackrel{\text{SI}}{=} \hbar \nabla \varphi + 2e\vec{A}
	\label{eqn:superfluid-velocity}
\end{equation}
Rewriting the equation gives:
\begin{align}
	\vec{A} = \frac{1}{2e}\left(\hbar \nabla \varphi_{\text{loop}} - 2m_e\vec{v}\right)
\end{align}
Substituting $\vec{v}$ with a more useable expression in terms of the current density $\vec{J}$ and $\lambda$ using Equation~\ref{eqn:london-penetration-depth}.
\begin{align}
	\vec{J} = -2e|\Psi|^2\vec{v} = -\frac{m_e}{\lambda^2e\mu_0}\vec{v} \Rightarrow \vec{v} = -\frac{\lambda^2e\mu_0}{m_e}\vec{J}
\end{align}
Combining the two equations gives us a useable expression for $\vec{A}$ in the loop:
\begin{align}
	\vec{A} &= \frac{1}{2e}\left(\hbar \nabla \varphi_{\text{loop}} + 2\lambda^2e\mu_0\vec{J} \right) \nonumber \\
	&= \frac{\Phi_0}{2\pi} \nabla \varphi_{\text{loop}} + \lambda^2\mu_0\vec{J}
\end{align}
Going back to Equation~\ref{eqn:magnetic-potential-integral}:
\begin{align}
	\Phi &= \underbrace{\frac{\Phi_0}{2\pi} \left(\gamma - \Delta\varphi_{\text{JJ}}\right)}_{\int_{\text{JJ}}\vec{A} \cdot d\vec{l}} \underbrace{- \frac{\Phi_0}{2\pi}\Delta \varphi_{\text{loop}} - \lambda^2\mu_0 \int \vec{J}\cdot d \vec{l}}_{\int_{\text{loop}}\vec{A}\cdot d\vec{l}} \nonumber \\
	&= \frac{\Phi_0}{2\pi} \left(\gamma - \underbrace{\left(\Delta\varphi_{\text{JJ}} + \Delta\varphi_{\text{loop}}\right)}_{\text{Multiple of } 2\pi} \right) - \lambda^2\mu_0 \int \vec{J}\cdot d \vec{l}
\end{align}
The phase must wind by a multiple of $2\pi$ to make sure that the wave function is uniquely defined at each point. Using this fact and the quantization of $\Phi$ in units of $\Phi_0$ we get:
\begin{align}
	\Phi &= \left(\frac{\Phi_0}{2\pi}\gamma - \lambda^2\mu_0 \int \vec{J}\cdot d \vec{l} \right) \mod \Phi_0 \\ 
	% \Rightarrow \gamma &= -\left(\frac{2\pi\Phi}{\Phi_0} + \frac{2\pi\lambda^2\mu_0}{\Phi_0} \int \vec{J}\cdot d \vec{l} \right) \mod 2\pi \\
	\gamma &= \frac{2\pi}{\Phi_0}\left(\Phi + \lambda^2\mu_0 \int \vec{J}\cdot d \vec{l} \right)
\end{align}

\section{Geometric factor $\tilde{j}$}
\label{app:derivation-geometric-factor-j}
The goal of this appendix section is to derive how to calculate $\tilde{j}$. In a rectangular thin film superconductor with thickness (height) $d$ on the order of $\lambda$ and width $w > \lambda$ such that $wd \gg \lambda$ then the current density a distance $x$ from the centre is given by\cite{rhoderickCurrentDistributionThin1962}:
\begin{equation}
	J(x) = \begin{cases}
		\frac{J(0)}{\sqrt{1 - \left(\frac{2x}{w}\right)^2}} & 0 \leq x \leq \frac{\lambda^2}{2d} \\
		\frac{J(w/2)}{\exp\left(d\frac{w/2 - x}{\lambda^2} \right)} & \frac{\lambda^2}{2d} < x \leq w/2
	\end{cases}
\end{equation}
The value for $J(w/2)$ can be found by stitching the two solutions together at $x = \frac{\lambda^2}{2d}$. To find $\tilde{j}$ we take the integral from $0$ to $w/2$ over $J(x)$. Multiplying by the height $d$ gives the current through the thin film. This is proportional to $J(0)$ and invites us to define $J(0) = \tilde{j}I$ where $I$ is the total current. 
\begin{align}
	I &= J(0) / \tilde{j} = 2d \int_0^{w/2} J(x)dx \nonumber \\
	\tilde{j} &= \frac{J(0)}{2d \int_0^{w/2} J(x)dx}
	\label{eqn:geometric-factor-j}
\end{align}
Since the integral is proportional to $J(0)$ the end result for $\tilde{j}$ only depends on the geometries of the sample and not the current $I$. This also means that the result for $\tilde{j}$ is valid for all currents. This integral quite possibly has an analytical solution, however we used SciPy to perform the integration numerically.